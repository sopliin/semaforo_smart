<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="shortcut icon" href="img/icons/jagar.png" />

	<link rel="canonical" href="https://demo-basic.adminkit.io/" />

    <title>Semáforo Smart - JAGAR</title>

	<link href="css/app.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="wrapper">
    <nav id="sidebar" class="sidebar js-sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="index.html">
          <span class="align-middle">Semáforo Smart</span>
        </a>

				<ul class="sidebar-nav">
					<li class="sidebar-header">
						Pages
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="index.html">
              <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Dashboard</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="pages-profile.html">
              <i class="align-middle" data-feather="user"></i> <span class="align-middle">Profile</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="pages-sign-in.html">
              <i class="align-middle" data-feather="log-in"></i> <span class="align-middle">Sign In</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="pages-sign-up.html">
              <i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">Sign Up</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="pages-blank.html">
              <i class="align-middle" data-feather="book"></i> <span class="align-middle">Blank</span>
            </a>
					</li>

					<li class="sidebar-header">
						Tools & Components
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="ui-buttons.html">
              <i class="align-middle" data-feather="square"></i> <span class="align-middle">Buttons</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="ui-forms.html">
              <i class="align-middle" data-feather="check-square"></i> <span class="align-middle">Forms</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="ui-cards.html">
              <i class="align-middle" data-feather="grid"></i> <span class="align-middle">Cards</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="ui-typography.html">
              <i class="align-middle" data-feather="align-left"></i> <span class="align-middle">Typography</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="icons-feather.html">
              <i class="align-middle" data-feather="coffee"></i> <span class="align-middle">Icons</span>
            </a>
					</li>

					<li class="sidebar-header">
						Plugins & Addons
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="charts-chartjs.html">
              <i class="align-middle" data-feather="bar-chart-2"></i> <span class="align-middle">Charts</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="maps-google.html">
              <i class="align-middle" data-feather="map"></i> <span class="align-middle">Maps</span>
            </a>
					</li>
				</ul>

				<div class="sidebar-cta">
					<div class="sidebar-cta-content">
						<strong class="d-inline-block mb-2">Upgrade to Pro</strong>
						<div class="mb-3 text-sm">
							Are you looking for more components? Check out our premium version.
						</div>
						<div class="d-grid">
							<a href="upgrade-to-pro.html" class="btn btn-primary">Upgrade to Pro</a>
						</div>
					</div>
				</div>
			</div>
		</nav>
    <div class="main">
      <nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
          <i class="hamburger align-self-center"></i>
        </a>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle" href="#" id="alertsDropdown" data-bs-toggle="dropdown">
								<div class="position-relative">
									<i class="align-middle" data-feather="bell"></i>
									<span class="indicator">4</span>
								</div>
							</a>
							<div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="alertsDropdown">
								<div class="dropdown-menu-header">
									4 New Notifications
								</div>
								<div class="list-group">
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<i class="text-danger" data-feather="alert-circle"></i>
											</div>
											<div class="col-10">
												<div class="text-dark">Update completed</div>
												<div class="text-muted small mt-1">Restart server 12 to complete the update.</div>
												<div class="text-muted small mt-1">30m ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<i class="text-warning" data-feather="bell"></i>
											</div>
											<div class="col-10">
												<div class="text-dark">Lorem ipsum</div>
												<div class="text-muted small mt-1">Aliquam ex eros, imperdiet vulputate hendrerit et.</div>
												<div class="text-muted small mt-1">2h ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<i class="text-primary" data-feather="home"></i>
											</div>
											<div class="col-10">
												<div class="text-dark">Login from 192.186.1.8</div>
												<div class="text-muted small mt-1">5h ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<i class="text-success" data-feather="user-plus"></i>
											</div>
											<div class="col-10">
												<div class="text-dark">New connection</div>
												<div class="text-muted small mt-1">Christina accepted your request.</div>
												<div class="text-muted small mt-1">14h ago</div>
											</div>
										</div>
									</a>
								</div>
								<div class="dropdown-menu-footer">
									<a href="#" class="text-muted">Show all notifications</a>
								</div>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle" href="#" id="messagesDropdown" data-bs-toggle="dropdown">
								<div class="position-relative">
									<i class="align-middle" data-feather="message-square"></i>
								</div>
							</a>
							<div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="messagesDropdown">
								<div class="dropdown-menu-header">
									<div class="position-relative">
										4 New Messages
									</div>
								</div>
								<div class="list-group">
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<img src="img/avatars/avatar-5.jpg" class="avatar img-fluid rounded-circle" alt="Vanessa Tucker">
											</div>
											<div class="col-10 ps-2">
												<div class="text-dark">Vanessa Tucker</div>
												<div class="text-muted small mt-1">Nam pretium turpis et arcu. Duis arcu tortor.</div>
												<div class="text-muted small mt-1">15m ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<img src="img/avatars/avatar-2.jpg" class="avatar img-fluid rounded-circle" alt="William Harris">
											</div>
											<div class="col-10 ps-2">
												<div class="text-dark">William Harris</div>
												<div class="text-muted small mt-1">Curabitur ligula sapien euismod vitae.</div>
												<div class="text-muted small mt-1">2h ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<img src="img/avatars/avatar-4.jpg" class="avatar img-fluid rounded-circle" alt="Christina Mason">
											</div>
											<div class="col-10 ps-2">
												<div class="text-dark">Christina Mason</div>
												<div class="text-muted small mt-1">Pellentesque auctor neque nec urna.</div>
												<div class="text-muted small mt-1">4h ago</div>
											</div>
										</div>
									</a>
									<a href="#" class="list-group-item">
										<div class="row g-0 align-items-center">
											<div class="col-2">
												<img src="img/avatars/avatar-3.jpg" class="avatar img-fluid rounded-circle" alt="Sharon Lessman">
											</div>
											<div class="col-10 ps-2">
												<div class="text-dark">Sharon Lessman</div>
												<div class="text-muted small mt-1">Aenean tellus metus, bibendum sed, posuere ac, mattis non.</div>
												<div class="text-muted small mt-1">5h ago</div>
											</div>
										</div>
									</a>
								</div>
								<div class="dropdown-menu-footer">
									<a href="#" class="text-muted">Show all messages</a>
								</div>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">
                <i class="align-middle" data-feather="settings"></i>
              </a>

							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
                <img src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1" alt="Charles Hall" /> <span class="text-dark">Charles Hall</span>
              </a>
							<div class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="pages-profile.html"><i class="align-middle me-1" data-feather="user"></i> Profile</a>
								<a class="dropdown-item" href="#"><i class="align-middle me-1" data-feather="pie-chart"></i> Analytics</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="index.html"><i class="align-middle me-1" data-feather="settings"></i> Settings & Privacy</a>
								<a class="dropdown-item" href="#"><i class="align-middle me-1" data-feather="help-circle"></i> Help Center</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="#">Log out</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>
      
<div class="container-fluid p-0">
  <div class="mb-3 d-flex align-items-center justify-content-between">
    <div>
      <h1 class="h3 d-inline align-middle">Gestión Semafórica</h1>
      <span class="badge bg-success ms-2" id="badge-modo">Modo automático</span>
    </div>
    <div class="text-muted">Cruce: <strong>Av. Universitaria x Av. La Marina</strong></div>
  </div>

  <div class="row">
    <!-- Columna visual del semáforo -->
    <div class="col-lg-7">
      <div class="card mb-3">
        <div class="card-header">
          <h5 class="card-title mb-0">Estado actual</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-12 col-xl-6 d-flex flex-column align-items-center justify-content-center">
              <!-- "Imagen" grande del semáforo: tres luces -->
              <div class="d-flex flex-column align-items-center justify-content-between" style="height: 520px;">
                <div class="rounded-circle border border-3 bg-danger" id="light-red" style="width: 160px; height: 160px;"></div>
                <div class="rounded-circle border border-3 bg-secondary" id="light-yellow" style="width: 160px; height: 160px;"></div>
                <div class="rounded-circle border border-3 bg-secondary" id="light-green" style="width: 160px; height: 160px;"></div>
              </div>
            </div>
            <div class="col-12 col-xl-6">
              <div class="card mb-3">
                <div class="card-body text-center">
                  <div class="text-muted">Fase</div>
                  <div class="h1 mb-0" id="fase-actual">ROJO</div>
                  <div class="text-muted mt-3">Tiempo restante</div>
                  <div class="display-4 fw-bold" id="countdown">30s</div>
                  <div class="mt-3">
                    <span class="badge bg-info">Ciclo: <span id="ciclo-actual">1</span></span>
                    <span class="badge bg-secondary">Duración total: <span id="duracion-ciclo">90s</span></span>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <h5 class="card-title mb-0">Sensores</h5>
                </div>
                <div class="card-body">
                  <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center">
                      <i class="align-middle me-2" data-feather="truck"></i> Tráfico vehicular
                    </div>
                    <span class="badge bg-success" id="sensor-trafico">Alto</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center">
                      <i class="align-middle me-2" data-feather="user"></i> Flujo peatonal
                    </div>
                    <span class="badge bg-warning" id="sensor-peatonal">Medio</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between">
                    <div class="d-flex align-items-center">
                      <i class="align-middle me-2" data-feather="clock"></i> Línea verde (onda verde)
                    </div>
                    <span class="badge bg-primary" id="estado-linea-verde">Sincronizado</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Columna de controles -->
    <div class="col-lg-5">
      <div class="card mb-3">
        <div class="card-header">
          <h5 class="card-title mb-0">Modo de operación</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="switchModo" checked>
                <label class="form-check-label" for="switchModo">Automático</label>
              </div>
              <small class="text-muted">En automático, los tiempos de fase son ineditables por un periodo.</small>
            </div>
            <div class="col-md-6">
              <label class="form-label">Periodo de bloqueo (min)</label>
              <input type="number" class="form-control" id="periodoBloqueo" value="60" min="1">
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-header d-flex align-items-center justify-content-between">
          <h5 class="card-title mb-0">Tiempos de fase (segundos)</h5>
          <span class="badge bg-secondary" id="badge-editable">Bloqueado</span>
        </div>
        <div class="card-body">
          <form class="row g-3">
            <div class="col-6">
              <label class="form-label">Rojo</label>
              <input type="number" class="form-control fase-input" id="faseRojo" value="30" min="5">
            </div>
            <div class="col-6">
              <label class="form-label">Amarillo</label>
              <input type="number" class="form-control fase-input" id="faseAmarillo" value="5" min="3">
            </div>
            <div class="col-6">
              <label class="form-label">Verde</label>
              <input type="number" class="form-control fase-input" id="faseVerde" value="40" min="5">
            </div>
            <div class="col-6">
              <label class="form-label">Peatonal</label>
              <input type="number" class="form-control fase-input" id="fasePeatonal" value="15" min="5">
            </div>
            <div class="col-12 text-end">
              <button type="button" class="btn btn-primary" id="btnGuardar" disabled>Guardar tiempos</button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-header">
          <h5 class="card-title mb-0">Acciones</h5>
        </div>
        <div class="card-body d-grid gap-2">
          <button class="btn btn-outline-primary" id="btnForzarCambio">Forzar cambio de fase</button>
          <button class="btn btn-outline-secondary" id="btnReiniciarCiclo">Reiniciar ciclo</button>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">Próximas fases</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-sm table-bordered align-middle mb-0">
              <thead>
                <tr>
                  <th>Orden</th>
                  <th>Fase</th>
                  <th>Duración</th>
                </tr>
              </thead>
              <tbody id="tablaProximas">
                <tr><td>1</td><td><span class="badge bg-danger">Rojo</span></td><td>30s</td></tr>
                <tr><td>2</td><td><span class="badge bg-warning text-dark">Amarillo</span></td><td>5s</td></tr>
                <tr><td>3</td><td><span class="badge bg-success">Verde</span></td><td>40s</td></tr>
                <tr><td>4</td><td><span class="badge bg-dark">Peatonal</span></td><td>15s</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
// Estado simulado
let modoAutomatico = true;
let fase = "ROJO"; // ROJO, AMARILLO, VERDE, PEATONAL
let tiempos = { ROJO: 30, AMARILLO: 5, VERDE: 40, PEATONAL: 15 };
let restante = tiempos[fase];
let ciclo = 1;

// Utilidad: actualizar visual del semáforo
function renderSemaforo() {
  const red = document.getElementById("light-red");
  const yellow = document.getElementById("light-yellow");
  const green = document.getElementById("light-green");
  red.classList.remove("bg-secondary","bg-danger");
  yellow.classList.remove("bg-secondary","bg-warning");
  green.classList.remove("bg-secondary","bg-success");

  if (fase === "ROJO") {
    red.classList.add("bg-danger");
    yellow.classList.add("bg-secondary");
    green.classList.add("bg-secondary");
  } else if (fase === "AMARILLO") {
    red.classList.add("bg-secondary");
    yellow.classList.add("bg-warning");
    green.classList.add("bg-secondary");
  } else if (fase === "VERDE") {
    red.classList.add("bg-secondary");
    yellow.classList.add("bg-secondary");
    green.classList.add("bg-success");
  } else {
    // PEATONAL: mantenemos rojo encendido para autos (convención simple)
    red.classList.add("bg-danger");
    yellow.classList.add("bg-secondary");
    green.classList.add("bg-secondary");
  }

  document.getElementById("fase-actual").textContent = fase;
  document.getElementById("countdown").textContent = restante + "s";
  document.getElementById("ciclo-actual").textContent = ciclo;
  const total = tiempos.ROJO + tiempos.AMARILLO + tiempos.VERDE + tiempos.PEATONAL;
  document.getElementById("duracion-ciclo").textContent = total + "s";
}

// Avanzar fase
function nextFase() {
  if (fase === "ROJO") fase = "AMARILLO";
  else if (fase === "AMARILLO") fase = "VERDE";
  else if (fase === "VERDE") fase = "PEATONAL";
  else { fase = "ROJO"; ciclo += 1; }
  restante = tiempos[fase];
  renderSemaforo();
}

// Tick de temporizador
setInterval(() => {
  restante -= 1;
  if (restante <= 0) {
    nextFase();
  } else {
    document.getElementById("countdown").textContent = restante + "s";
  }
}, 1000);

// Modo automático / manual
const switchModo = document.getElementById("switchModo");
const badgeModo = document.getElementById("badge-modo");
const badgeEditable = document.getElementById("badge-editable");
const btnGuardar = document.getElementById("btnGuardar");
const inputs = document.querySelectorAll(".fase-input");
const periodoBloqueo = document.getElementById("periodoBloqueo");

function aplicarModo() {
  modoAutomatico = switchModo.checked;
  if (modoAutomatico) {
    badgeModo.textContent = "Modo automático";
    badgeModo.classList.remove("bg-danger"); badgeModo.classList.add("bg-success");
    badgeEditable.textContent = "Bloqueado";
    btnGuardar.disabled = true;
    inputs.forEach(i => i.disabled = true);
    periodoBloqueo.disabled = false;
  } else {
    badgeModo.textContent = "Modo manual";
    badgeModo.classList.remove("bg-success"); badgeModo.classList.add("bg-danger");
    badgeEditable.textContent = "Editable";
    btnGuardar.disabled = false;
    inputs.forEach(i => i.disabled = false);
    periodoBloqueo.disabled = true;
  }
}
switchModo.addEventListener("change", aplicarModo);
aplicarModo();

// Guardar tiempos (manual)
btnGuardar.addEventListener("click", () => {
  const r = parseInt(document.getElementById("faseRojo").value || "30", 10);
  const a = parseInt(document.getElementById("faseAmarillo").value || "5", 10);
  const v = parseInt(document.getElementById("faseVerde").value || "40", 10);
  const p = parseInt(document.getElementById("fasePeatonal").value || "15", 10);
  tiempos = { ROJO: r, AMARILLO: a, VERDE: v, PEATONAL: p };
  restante = Math.min(restante, tiempos[fase]);
  renderSemaforo();
});

// Acciones
document.getElementById("btnForzarCambio").addEventListener("click", () => {
  nextFase();
});
document.getElementById("btnReiniciarCiclo").addEventListener("click", () => {
  fase = "ROJO"; restante = tiempos[fase]; ciclo = 1; renderSemaforo();
});

// Init
renderSemaforo();
</script>

    </div>
  </div>
  <script src="js/app.js"></script>
</body>
</html>
